# Описание API

##### При запущенном приложении документацию можно посмотреть по адресу: `http://localhost:8080/api/docs`, либо на других ip и port, которые будут указаны в конфиге

1.  Для получения информации из БД нужно отправить на <http://0.0.0.0:8080> запрос:

-   `GET`
-   с путем `/table_info?table=...`, где вместо `...` указывается название таблицы:
    -   `mcc_codes` список МСС кодов и их описание
-   в ответ получаем JSON:
    ```json
        {
          "data": [
            {
              "column_1": "value_1", // column_1 соответствует первому столбцу в выбранной таблице
              "column_2": "value_2", // column_2 соответствует второму столбцу в выбранной таблице
              ...
            },// value_1, value_2 это значения в первой строке выбранной таблице
            ...// далее аналогично описаны все последующие строки
          ]
        }  
    ```

2.  Для обновления информации в БД нужно отправить на <http://0.0.0.0:8080> запрос:

-   `POST`
-   с путем `/table_reimport?table=...`, где вместо `...` указывается название таблицы:
    -   `mcc_codes` список МСС кодов и их описание
-   в тело запроса вставляем JSON(**!!! Важно учитывать тип и структуру данных, выбранной таблицы. Тип и структуру можно посмотреть в файле `DB_CREATE_SCRIPTS.md`**):  
    ```json
    {
      "data": [
        {
          "column_1": "value_1", // column_1 соответствует первому столбцу в выбранной таблице
          "column_2": "value_2", // column_2 соответствует второму столбцу в выбранной таблице
          ...
        },// value_1, value_2 это значения в первой строке выбранной таблице
        ...// далее аналогично описаны все последующие строки
      ]
    }    
    ```
-   в ответ получаем JSON:
    ```json
    {
      "data": [
        {
          "column_1": "value_1", // column_1 соответствует первому столбцу в выбранной таблице
          "column_2": "value_2", // column_2 соответствует второму столбцу в выбранной таблице
          ...
        },// value_1, value_2 это значения в первой строке выбранной таблице
        ...// далее аналогично описаны все последующие строки
      ]
    }    
    ```

3.  Для подсчета нужно отправить на <http://0.0.0.0:8080> запрос:

-   `POST`
-   с путем `/calculator`:
-   в тело запроса вставляем JSON:  
    ```json
          {
              "mcc": "smallint", // Код МСС, берется из запроса
              "num_1": "numeric", // Первое число
              "num_2": "numeric", // Второе число
              "operation": "text" // Операция
          }  
    ```
-   в ответ получаем JSON:
    ```json
    {
      "mcc": "smallint", // Код МСС, берется из запроса
      "mcc_name": "text", // Название МСС
      "mcc_description": "text", // Описание МСС
      "num_1": "numeric", // Первое число
      "num_2": "numeric", // Второе число
      "operation": "text", // Операция
      "result": "numeric"
      }  
    ```
